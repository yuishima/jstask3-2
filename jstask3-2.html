<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js制作課題③－２</title>
</head>
<body>
    <h1>ToDoリスト</h1>
    <div action="#" method="get" name="todo-list">
        <input type="radio" name="select-item">全て
        <input type="radio" name="select-item">作業中
        <input type="radio" name="select-item">完了
        <h2>新規タスクの追加</h2>
        <input type="text" id="add-todo">
        <input type="button" id="add-btn" value="追加">
    </div>
    <table>
        <thead>
            <th>ID</th>
            <th> コメント </th>
            <th> 状態 </th>
            <th></th>
        </thead>
        <tbody  id="display">
        </tbody>
    </table>
    <script>
        'use strict';
        //配列定義
        const todoList = [];
        const btn = document.getElementById('add-btn');
        const todoListElement = document.getElementById('display');
        btn.addEventListener('click',() => {
            displayList();
        });
        //空の配列に入力値を入れていくfunction
        const displayList = () => {
            const todo = document.getElementById("add-todo").value;
            document.getElementById("add-todo").value = "";
            const todoItem = {task: todo, status: '作業中'};
            const tasks = todoList.task;
            if(todo){
                todoList.push(todoItem);
                displayResult();
            }
        };
        //表示function
        const displayResult = () => {
            while(todoListElement.firstChild){
                todoListElement.removeChild(todoListElement.firstChild);
            };
            todoList.forEach((todo,index) => {
                const trList = document.createElement('tr');
                //index番号の表示
                const tdIndex = document.createElement('td');
                tdIndex.textContent = index;
                //コメントの表示
                const tdValue = document.createElement('td');
                tdValue.textContent = todo.task;
                //作業中、削除ボタンの表示
                const tdBtn = document.createElement('td');
                const checkBtn = document.createElement('input');
                checkBtn.setAttribute('type','button');
                checkBtn.setAttribute('value',todo.status);
                const removeBtn = document.createElement('input');
                removeBtn.setAttribute('type','button');
                removeBtn.setAttribute('value','削除');
                checkBtn.addEventListener('click',() => {
                    checkTodo(todo);
                });
                removeBtn.addEventListener('click',() => {
                    removeTodo(index);
                });
                trList.appendChild(tdIndex);
                trList.appendChild(tdValue);
                trList.appendChild(checkBtn);
                trList.appendChild(removeBtn);
                todoListElement.appendChild(trList);
            });
        };
        //作業中を押す
        function checkTodo(index) {
            console.log('check');
        };
        //削除を押す
        function removeTodo(index){
            todoList.splice(index,1);
            displayResult();
        };
    </script>
</body>
</html>